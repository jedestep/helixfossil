<!DOCTYPE html>
<html lang="en">
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>
        <script src="../../flash/flowplayer-3.2.13.js"></script>
        <link href="../../bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
        <script>
            function btn(dn) {
                $(document).ready(function() {
                    $("#"+dn).click(function() {
                        $.post("", "stream0 | " + dn, function(data, status) {
                            $("#test").text(dn);
                        });
                    });
                });
            };
            btn("a"); btn("b");
            btn("left"); btn("right");
            btn("up"); btn("down");
            btn("start"); btn("select");
            btn("l"); btn("r");

            document.onkeypress = function(e) {
                switch (e.keyCode) {
                    case 97:
                        $("#left").trigger("click"); break;
                    case 98:
                        $("#start").trigger("click"); break;
                    case 100:
                        $("#right").trigger("click"); break;
                    case 101:
                        $("#r").trigger("click"); break;
                    case 110:
                        $("#select").trigger("click"); break;
                    case 113:
                        $("#l").trigger("click"); break;
                    case 115:
                        $("#down").trigger("click"); break;
                    case 119:
                        $("#up").trigger("click"); break;
                    case 120:
                        $("#b").trigger("click"); break;
                    case 122:
                        $("#a").trigger("click"); break;
                }
            }
        </script>
        <style type="text/css">
            body {
                padding-top: 60px;
                padding-bottom: 40px;
            }

            .sidebar-nav {
                padding: 9px 0;
            }

            @media (max-width: 980px) {
                .navbar-next.pull-right {
                    float: none;
                    padding-left: 5px;
                    padding-left: 5px;
                }
            }
        </style>
    </head>
    <body>
        <div id="title" class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="brand" href="http://www.helixfossil.tv">HelixFossil.tv</a>
                    <div class="nav-collapse collapse">
                        <ul class="nav">
                            <li><a href="http://www.helixfossil.tv/cgi/browse.cgi">Browse streams</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span8">
                    <div class="hero-unit">
                        <h3>The name of the stream!</h3>
                        <div class="row-fluid">
                            <div class="span8">
                                <div id="stream" style="width:640px;height:480px;display:block;"></div>
                            </div>
                            <div class="span4">
                                <div id="controls">
                                    "z" = A<br/>
                                    "x" = B<br/>
                                    "w" = Up<br/>
                                    "a" = Left<br/>
                                    "s" = Down<br/>
                                    "d" = Right<br/>
                                    "q" = L<br/>
                                    "e" = R<br/>
                                    "b" = Start<br/>
                                    "n" = Select<br/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="span3">
                    <h3>Chat goes here!</h3>
                </div>
            </div>

            <div class="row-fluid">
                <div class="span8">
                    <div class="well sidebar-nav">
                        <div id="buttons">
                            <div class="btn-group">
                            <button class="btn" id="a">a</button>
                            <button class="btn" id="b">b</button>
                            </div>
                            <div class="btn-group">
                            <button class="btn" id="left">left</button>
                            <button class="btn" id="right">right</button>
                            </div>
                            <div class="btn-group">
                            <button class="btn" id="up">up</button>
                            <button class="btn" id="down">down</button>
                            </div>
                            <div class="btn-group">
                            <button class="btn" id="start">start</button>
                            <button class="btn" id="select">select</button>
                            </div>
                            <div class="btn-group">
                            <button class="btn" id="l">l</button>
                            <button class="btn" id="r">r</button>
                            </div>
                            <span class="pull-right" style="padding-right:9px">Last input: <span id="test">none!</span></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            $f("stream", "../../flash/flowplayer-3.2.18.swf", {
                clip: {
                    url: 'stream0',
                    autoPlay: false,
                    live: true,
                    provider: 'rtmp'    
                },

                plugins: {
                    rtmp: {
                        url: '../../flash/flowplayer.rtmp-3.2.13.swf',
                        netConnectionUrl: 'rtmp://rtmp.helixfossil.tv/stream'
                    },
                    controls: {
                        url: '../../flash/flowplayer.controls-3.2.16.swf',
                        play: true,
                        scrubber: true
                    }
                }
            });
        </script>
        <script src="../../bootstrap/js/bootstrap-collapse.js"></script>
    </body>
</html>
